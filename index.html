<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jeen - Healthy Food with Calculated Calories</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="home/style.css">

    <style>
        #common_values_section h3 { color: white; }

        /* =========================================================
           ‚úÖ Component 75 Auth Popup (Exact Design)
           ========================================================= */
        :root{
            --hbj-green: #006744;
            --hbj-accent: #97CA66;
            --hbj-white: #ffffff;
        }

        .hbj-auth-overlay{
            position: fixed;
            inset: 0;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 18px;
            background: rgba(0,0,0,.38);
            z-index: 9999;
            font-family: "Poppins", sans-serif;
        }
        .hbj-auth-overlay.show{ display:flex; }

        .hbj-auth-card{
            width: 100%;
            max-width: 520px;
            background: var(--hbj-green);
            border-radius: 56px;
            padding: 40px 42px 34px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 24px 70px rgba(0,0,0,.25);
        }

        /* The big decorative "J" curve from your Vector.png */
        .hbj-auth-card::before{
            content:"";
            position:absolute;

            /* ‚úÖ push it OUTSIDE so only the top-left part shows */
            left: -170px;
            top: -155px;

            /* ‚úÖ make it larger but clipped */
            width: 520px;
            height: 520px;

            background-image: url("/common_elements/Vector.png");
            background-repeat: no-repeat;
            background-size: contain;
            background-position: left top;

            pointer-events:none;
            z-index: 0;
            opacity: 1;
            }
        .hbj-auth-card > *{
            position: relative;
            z-index: 1;
        }


        /* Close (not in the design, but practical) */
        .hbj-auth-close{
            position:absolute;
            right: 18px;
            top: 16px;
            width: 34px;
            height: 34px;
            border-radius: 50%;
            border: none;
            background: rgba(255,255,255,.12);
            color: #fff;
            font-size: 18px;
            cursor: pointer;
            display:flex;
            align-items:center;
            justify-content:center;
        }

        .hbj-title{
            text-align:center;
            color: #fff;
            font-weight: 800;
            font-size: 34px;
            margin: 18px 0 18px;
        }

        .hbj-field{ margin-top: 16px; }
        .hbj-label{
            color: var(--hbj-accent);
            font-weight: 700;
            font-size: 13px;
            margin: 0 0 8px;
        }

        .hbj-input{
            width: 100%;
            height: 36px;
            border-radius: 999px;
            border: none;
            outline: none;
            padding: 0 16px;
            background: #fff;
            font-size: 13px;
            font-weight: 500;
        }

        .hbj-row{
            display:flex;
            justify-content: space-between;
            align-items:center;
            margin-top: 12px;
            color: #fff;
            font-size: 12px;
            font-weight: 600;
        }

        .hbj-check{
            display:flex;
            align-items:center;
            gap: 8px;
            user-select:none;
        }
        .hbj-check input{
            width: 14px;
            height: 14px;
            accent-color: var(--hbj-accent);
        }

        .hbj-link{
            border: none;
            background: transparent;
            color: #fff;
            text-decoration: underline;
            cursor: pointer;
            font-weight: 700;
            font-size: 12px;
            padding: 0;
        }

        .hbj-btn{
            display:block;
            margin: 18px auto 0;
            min-width: 120px;
            height: 28px;
            border-radius: 999px;
            border: none;
            background: var(--hbj-accent);
            color: #0b3f2c;
            font-weight: 800;
            font-size: 12px;
            cursor: pointer;
        }

        .hbj-divider{
            margin: 14px auto 10px;
            width: 74%;
            height: 2px;
            background: rgba(255,255,255,.55);
            border-radius: 99px;
        }

        .hbj-with{
            text-align:center;
            color:#fff;
            font-size: 12px;
            font-weight: 700;
            margin-top: 10px;
        }

        .hbj-social{
            margin-top: 10px;
            display:flex;
            justify-content:center;
            gap: 14px;
        }
        .hbj-icon-btn{
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 2px solid #fff;
            background: transparent;
            color: #fff;
            font-weight: 900;
            cursor: pointer;
            display:flex;
            align-items:center;
            justify-content:center;
            font-size: 16px;
            line-height: 1;
        }

        .hbj-bottom{
            margin-top: 14px;
            text-align:center;
            color:#fff;
            font-size: 12px;
            font-weight: 600;
        }

        /* Error message (keeps your ‚Äúaccount not found‚Äù visible, no auto-redirect) */
        .hbj-error{
            display:none;
            margin-top: 12px;
            text-align:center;
            color: #ffd6d6;
            font-size: 12px;
            font-weight: 700;
        }
        .hbj-success{
            display:none;
            margin-top: 12px;
            text-align:center;
            color: #d8ffe6;
            font-size: 12px;
            font-weight: 700;
        }

        .hbj-hidden{ display:none; }

        /* BMR layout (keeps the same theme) */
        .hbj-bmr-grid{
            display:grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-top: 8px;
        }
        .hbj-two{
            display:grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        .hbj-result{
            display:none;
            margin-top: 14px;
            background: rgba(255,255,255,.12);
            border: 1px solid rgba(255,255,255,.22);
            border-radius: 22px;
            padding: 12px 14px;
            color: #fff;
            font-size: 12px;
            line-height: 1.5;
        }

        @media (max-width: 480px){
            .hbj-auth-card{ border-radius: 44px; padding: 34px 26px 28px; }
            .hbj-title{ font-size: 30px; }
            .hbj-auth-card::before{ width: 270px; height: 250px; }
        }
    </style>
</head>
<body>

    <div id="header"></div>

    <script src="common.js"></script>
    <script>
        loadHTML("header", "/common_elements/header.html");
    </script>


    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <p id="first">Healthy Food</p>
            <p id="second">with Calculated Calories</p>
            <p>Indulge in delicious desserts without the guilt. Every treat comes with precise nutritional information to support your wellness journey.</p>
            <button class="cta-button"><a href="/menu/menu.html">Shop Now</a></button>
        </div>
        <div class="hero-image">
            <img src="home/Group 555.png" alt="group555">
        </div>
    </section>

    <!-- Values Section -->
    <section class="values-section">
        <div class="wave-container">
            <div class="wave-wrap">
                <svg class="wave" viewBox="0 0 1440 150" preserveAspectRatio="none">
                    <path d="M0,50 C300,150 600,-50 900,50 C1200,150 1440,0 1440,0 L1440,150 L0,150 Z"></path>
                </svg>

                <svg class="wave wave2" viewBox="0 0 1440 150" preserveAspectRatio="none">
                    <path d="M0,50 C300,150 600,-50 900,50 C1200,150 1440,0 1440,0 L1440,150 L0,150 Z"></path>
                </svg>
            </div>
        </div>

        <h2>Our Values</h2>
        <p class="values-subtitle">Because What we Stand for matters.</p>

        <div id="common_values_section"></div>
    </section>


    <!-- Best Sellers Section -->
    <section class="best-sellers">
        <h1>Best Sellers</h1>
        <p class="best-sellers-subtitle">The favorites everyone comes back for</p>

        <div class="filter-tabs">
            <div class="filter-tab active" data-category="sandwiches">Sandwiches</div>
            <div class="filter-tab" data-category="salads">Salads</div>
            <div class="filter-tab" data-category="desserts">Desserts</div>
            <div class="filter-tab" data-category="shakers">Shakers</div>
        </div>

        <div class="products-grid">
            <div class="product-card" data-category="sandwiches">
                <img src="home/OIP (1) (1) 3.png" alt="">
                <div class="product-info">
                    <h3 class="product-name">Sandwich</h3>
                    <p class="product-description">Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>
                    <div class="product-footer">
                        <span class="product-calories">üî• 120 Calories</span>
                        <button class="add-button">+</button>
                    </div>
                </div>
            </div>
            <div class="product-card" data-category="shakers">
                <img src="home/OIP (1) (1) 3.png" alt="">
                <div class="product-info">
                    <h3 class="product-name">Shaker</h3>
                    <p class="product-description">Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>
                    <div class="product-footer">
                        <span class="product-calories">üî• 120 Calories</span>
                        <button class="add-button">+</button>
                    </div>
                </div>
            </div>
            <div class="product-card" data-category="salads">
                <img src="home/OIP (1) (1) 3.png" alt="">
                <div class="product-info">
                    <h3 class="product-name">Salad</h3>
                    <p class="product-description">Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>
                    <div class="product-footer">
                        <span class="product-calories">üî• 120 Calories</span>
                        <button class="add-button">+</button>
                    </div>
                </div>
            </div>
            <div class="product-card" data-category="desserts">
                <img src="home/OIP (1) (1) 3.png" alt="">
                <div class="product-info">
                    <h3 class="product-name">Desserts</h3>
                    <p class="product-description">Lorem ipsum dolor sit amet consectetur adipiscing elit.</p>
                    <div class="product-footer">
                        <span class="product-calories">üî• 120 Calories</span>
                        <button class="add-button">+</button>
                    </div>
                </div>
            </div>
        </div>

        <button class="cta-button"><a href="/menu/menu.html">See More</a></button>
    </section>

    <!-- Story Section -->
    <section class="story-section">
        <div class="first_half">
            <div class="story-left">
                <h2>Our <br>Story</h2>
            </div>
            <section class="story-image-wrap"><img src="home/line.png" alt=""></section>
        </div>

        <div class="story-right">
            <div class="story-content">
                <h3>Meet Jeen</h3>
                <p>HealthyByJeen was born out of resilience and hope. Its story began after an Israeli strike destroyed the building of its owner, leaving behind loss but also a strong determination to rebuild. From that hardship, the vision of HealthyByJeen emerged a place dedicated to serving nutritious, carefully measured meals that promote strength, health, and new beginnings.</p>
                <button class="story-button"><a href="/story/story.html">Read more</a></button>
            </div>
        </div>
    </section>


    <!-- Subscription Section -->
    <section class="subscription-section">
        <h2>Subscription Plans</h2>
        <p class="subscription-subtitle">Subscribe to HealthyByJeen and never worry about your health</p>

        <div class="subscription-band"></div>

        <div class="plans-slider">
            <button class="slider-arrow left">‚Äπ</button>
            <div class="plans-grid" id="plansGrid">

                <div class="plan-card">
                    <h3 class="plan-name">Daily Plan</h3>
                    <p class="plan-subtitle">Perfect for staying on track every day</p>
                    <div class="plan-price">$4.99</div>
                    <p class="plan-period">per day</p>
                    <ul class="plan-features">
                        <li>1 healthy dish delivered</li>
                        <li>Calorie information included</li>
                        <li>Fresh ingredients daily</li>
                        <li>Cancel anytime</li>
                        <li>Macro calculator</li>
                    </ul>
                    <button class="plan-button">Choose Daily Plan</button>
                </div>

                <div class="plan-card popular">
                    <h3 class="plan-badge">The Most Popular</h3>

                    <h3 class="plan-name">Weekly Plan</h3>
                    <p class="plan-subtitle">Perfect for trying our healthy dishes</p>
                    <div class="plan-price">$29.99</div>
                    <p class="plan-period">per week</p>
                    <ul class="plan-features">
                        <li>7 healthy dishes delivered</li>
                        <li>Calorie information included</li>
                        <li>Fresh ingredients daily</li>
                        <li>Cancel anytime</li>
                        <li>Macro calculator</li>
                    </ul>
                    <button class="plan-button" id="open-weekly">Choose Weekly Plan</button>
                    <div id="weekly-container"></div>
                </div>

                <div class="plan-card">
                    <h3 class="plan-name">Monthly Plan</h3>
                    <p class="plan-subtitle">Best value for regular healthy eating</p>
                    <div class="plan-price">$99.99</div>
                    <p class="plan-period">per month<br><span class="save-tag">Save 15%</span></p>
                    <ul class="plan-features">
                        <li>30 healthy dishes delivered</li>
                        <li>Detailed nutrition tracking</li>
                        <li>Premium ingredients</li>
                        <li>Macro calculator</li>
                        <li>Free nutrition consultation</li>
                    </ul>
                    <button class="plan-button secondary">Choose Monthly Plan</button>
                </div>

            </div>
            <button class="slider-arrow right">‚Ä∫</button>
        </div>
    </section>


    <!-- Reviews Section -->
    <section class="reviews-section">
        <h2>Reviews</h2>
        <p class="reviews-subtitle">Because your words matter</p>

        <div class="reviews-slider">
            <button class="slider-arrow left">‚Äπ</button>

            <div class="slider-track-wrapper">
                <div class="slider-track">
                    <div class="review-card">
                        <div class="review-header">
                            <div class="name-rating">
                                <div>
                                    <h4 class="reviewer-name">Karim</h4>
                                    <p class="review-role">Assistant</p>
                                </div>
                                <div class="review-rating">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                </div>
                            </div>
                        </div>
                        <p class="review-text">Every dish tastes clean and intentional. I feel good after every meal here.</p>
                    </div>

                    <div class="review-card">
                        <div class="review-header">
                            <div class="name-rating">
                                <div>
                                    <h4 class="reviewer-name">Farah</h4>
                                    <p class="review-role">Data Analyst</p>
                                </div>
                                <div class="review-rating">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                </div>
                            </div>
                        </div>
                        <p class="review-text">Fresh, flavorful, and actually filling. Finally a place that makes healthy eating exciting.</p>
                    </div>

                    <div class="review-card">
                        <div class="review-header">
                            <div class="name-rating">
                                <div>
                                    <h4 class="reviewer-name">Mohammad</h4>
                                    <p class="review-role">Firefighter</p>
                                </div>
                                <div class="review-rating">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                </div>
                            </div>
                        </div>
                        <p class="review-text">The portions, the quality, the service , everything is consistently great. My go-to spot now.</p>
                    </div>

                    <div class="review-card">
                        <div class="review-header">
                            <div class="name-rating">
                                <div>
                                    <h4 class="reviewer-name">Sara</h4>
                                    <p class="review-role">Nutritionist</p>
                                </div>
                                <div class="review-rating">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                </div>
                            </div>
                        </div>
                        <p class="review-text">Great experience, always fresh and tasty meals. Highly recommend!</p>
                    </div>

                    <div class="review-card">
                        <div class="review-header">
                            <div class="name-rating">
                                <div>
                                    <h4 class="reviewer-name">Myriam</h4>
                                    <p class="review-role">Designer</p>
                                </div>
                                <div class="review-rating">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                    <img src="home/leaf_icon.png" alt="Leaf" width="20">
                                </div>
                            </div>
                        </div>
                        <p class="review-text">Great experience, always fresh and tasty meals. Highly recommend!</p>
                    </div>
                </div>
            </div>

            <button class="slider-arrow right">‚Ä∫</button>
        </div>
    </section>


    <!-- LOAD FOOTER -->
    <div id="footer"></div>

    <!-- =========================================================
         ‚úÖ Component 75 Popup Markup
         ========================================================= -->
    <div id="hbjAuth" class="hbj-auth-overlay" aria-hidden="true">
        <!-- ‚úÖ IMPORTANT: stop clicks inside card from bubbling -->
        <div class="hbj-auth-card" role="dialog" aria-modal="true" onclick="event.stopPropagation()">
            <button class="hbj-auth-close" type="button" onclick="hbjCloseAuth()" aria-label="Close">‚úï</button>

            <!-- LOGIN -->
            <div id="hbj-login">
                <div class="hbj-title">Log in</div>

                <form id="hbjLoginForm">
                    <div class="hbj-field">
                        <div class="hbj-label">Email</div>
                        <input class="hbj-input" id="hbjLoginEmail" type="email" required autocomplete="email">
                    </div>

                    <div class="hbj-field">
                        <div class="hbj-label">Password</div>
                        <input class="hbj-input" id="hbjLoginPassword" type="password" required autocomplete="current-password">
                    </div>

                    <div class="hbj-row">
                        <label class="hbj-check">
                            <input id="hbjRemember" type="checkbox">
                            <span>Remember me</span>
                        </label>
                        <button class="hbj-link" type="button" onclick="hbjForgot()">Forgot password?</button>
                    </div>

                    <button class="hbj-btn" type="submit">Log in</button>

                    <div class="hbj-divider"></div>
                    <div class="hbj-with">Log in with</div>

                    <div class="hbj-social">
                        <button class="hbj-icon-btn" type="button" onclick="hbjSocial('facebook')" aria-label="Facebook">f</button>
                        <button class="hbj-icon-btn" type="button" onclick="hbjSocial('google')" aria-label="Google">G+</button>
                    </div>

                    <div id="hbjLoginErr" class="hbj-error"></div>
                    <div id="hbjLoginOk" class="hbj-success"></div>

                    <div class="hbj-bottom">
                        Don‚Äôt have an account?
                        <button class="hbj-link" type="button" onclick="hbjShow('signup')">Sign up</button>
                        <br><br>
                        <button class="hbj-link" type="button" onclick="hbjShow('bmr')">Don‚Äôt know? Let‚Äôs calculate it</button>
                    </div>
                </form>
            </div>

            <!-- SIGNUP -->
            <div id="hbj-signup" class="hbj-hidden">
                <div class="hbj-title">Sign up</div>

                <form id="hbjSignupForm">
                    <div class="hbj-field">
                        <div class="hbj-label">Full Name</div>
                        <input class="hbj-input" id="hbjSignupName" type="text" required autocomplete="name">
                    </div>

                    <div class="hbj-field">
                        <div class="hbj-label">Email</div>
                        <input class="hbj-input" id="hbjSignupEmail" type="email" required autocomplete="email">
                    </div>

                    <div class="hbj-field">
                        <div class="hbj-label">Password</div>
                        <input class="hbj-input" id="hbjSignupPassword" type="password" required autocomplete="new-password">
                    </div>

                    <button class="hbj-btn" type="submit">Sign up</button>

                    <div id="hbjSignupErr" class="hbj-error"></div>
                    <div id="hbjSignupOk" class="hbj-success"></div>

                    <div class="hbj-bottom">
                        Already have an account?
                        <button class="hbj-link" type="button" onclick="hbjShow('login')">Log in</button>
                    </div>
                </form>
            </div>

            <!-- BMR -->
            <div id="hbj-bmr" class="hbj-hidden">
                <div class="hbj-title">BMR</div>

                <form id="hbjBmrForm">
                    <div class="hbj-bmr-grid">
                        <div class="hbj-two">
                            <div>
                                <div class="hbj-label">Age</div>
                                <select class="hbj-input" id="hbjAge" required>
                                    <option value="" disabled selected>Select</option>
                                    <option value="18-35">18-35</option>
                                    <option value="35-60">35-60</option>
                                    <option value="60+">60+</option>
                                </select>
                            </div>

                            <div>
                                <div class="hbj-label">Gender</div>
                                <select class="hbj-input" id="hbjGender" required>
                                    <option value="" disabled selected>Select</option>
                                    <option value="female">Female</option>
                                    <option value="male">Male</option>
                                </select>
                            </div>
                        </div>

                        <div class="hbj-two">
                            <div>
                                <div class="hbj-label">Height (cm)</div>
                                <input class="hbj-input" id="hbjHeight" type="number" min="80" max="250" step="1" required>
                            </div>
                            <div>
                                <div class="hbj-label">Weight (kg)</div>
                                <input class="hbj-input" id="hbjWeight" type="number" min="25" max="250" step="0.1" required>
                            </div>
                        </div>

                        <div>
                            <div class="hbj-label">Activity</div>
                            <select class="hbj-input" id="hbjActivity" required>
                                <option value="" disabled selected>Select</option>
                                <option value="1.2">Slightly active</option>
                                <option value="1.55">Moderately active</option>
                                <option value="1.725">Highly active</option>
                            </select>
                        </div>

                        <button class="hbj-btn" type="submit">Calculate</button>

                        <div id="hbjBmrResult" class="hbj-result"></div>

                        <div class="hbj-bottom">
                            <button class="hbj-link" type="button" onclick="hbjShow('login')">Back to Log in</button>
                        </div>
                    </div>
                </form>
            </div>

        </div>
    </div>


    <script>
        loadHTML("footer", "/common_elements/footer.html");
        loadHTML("common_values_section", "/common_elements/common_values_section.html");

        const reviewsSection = document.querySelector('.reviews-section');
        const track = reviewsSection.querySelector('.slider-track');
        const leftBtn = reviewsSection.querySelector('.slider-arrow.left');
        const rightBtn = reviewsSection.querySelector('.slider-arrow.right');

        const cards = document.querySelectorAll('.review-card');
        const cardWidth = cards[0].offsetWidth + 30;

        const totalCards = cards.length;
        const visibleCards = 3;

        let index = 0;

        rightBtn.addEventListener('click', () => {
            index++;
            if (index > totalCards - visibleCards) index = 0;
            track.style.transform = `translateX(-${index * cardWidth}px)`;
        });

        leftBtn.addEventListener('click', () => {
            index--;
            if (index < 0) index = totalCards - visibleCards;
            track.style.transform = `translateX(-${index * cardWidth}px)`;
        });

        const hamburger = document.getElementById('hamburger');
        const navMenu = document.getElementById('nav-menu');

        if(hamburger && navMenu){
            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navMenu.classList.toggle('active');
            });
        }
    </script>

    <script>
        document.getElementById("open-weekly").addEventListener("click", function() {
            fetch("home/weekly-plan.html")
                .then(res => res.text())
                .then(html => {
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, "text/html");

                    const popupHTML = doc.querySelector("#weekly-popup").outerHTML;

                    const popupStyle = doc.querySelector("style");
                    let popupCSS = "";
                    if (popupStyle) popupCSS = `<style>${popupStyle.innerHTML}</style>`;

                    document.getElementById("weekly-container").innerHTML = popupCSS + popupHTML;

                    const scripts = doc.querySelectorAll("script");
                    scripts.forEach(scriptTag => {
                        const newScript = document.createElement("script");
                        newScript.textContent = scriptTag.textContent;
                        document.body.appendChild(newScript);
                    });

                    document.getElementById("weekly-popup").style.display = "flex";
                });
        });
    </script>

    <script>
        const subscriptionSection = document.querySelector('.subscription-section');

        const grid = subscriptionSection.querySelector("#plansGrid");
        const leftArrow = subscriptionSection.querySelector(".slider-arrow.left");
        const rightArrow = subscriptionSection.querySelector(".slider-arrow.right");

        function getScrollAmount() {
            const card = grid.querySelector(".plan-card");
            const gap = 40;
            return card ? card.offsetWidth + gap : 0;
        }

        function updateArrows() {
            const maxScrollLeft = grid.scrollWidth - grid.clientWidth;

            if (maxScrollLeft <= 0) {
                leftArrow.style.display = "none";
                rightArrow.style.display = "none";
                return;
            } else {
                leftArrow.style.display = "block";
                rightArrow.style.display = "block";
            }

            leftArrow.disabled = grid.scrollLeft <= 0;
            rightArrow.disabled = grid.scrollLeft >= maxScrollLeft - 1;
        }

        leftArrow.addEventListener("click", () => {
            grid.scrollBy({ left: -getScrollAmount(), behavior: "smooth" });
        });

        rightArrow.addEventListener("click", () => {
            grid.scrollBy({ left: getScrollAmount(), behavior: "smooth" });
        });

        grid.addEventListener("scroll", updateArrows);
        window.addEventListener("resize", updateArrows);
        updateArrows();
    </script>

    <script>
        const tabs = document.querySelectorAll('.filter-tab');
        const products = document.querySelectorAll('.product-card');

        function filterProducts(category) {
            products.forEach(product => {
                product.style.display =
                    product.dataset.category === category ? 'block' : 'none';
            });
        }

        const activeTab = document.querySelector('.filter-tab.active');
        if (activeTab) filterProducts(activeTab.dataset.category);

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                filterProducts(tab.dataset.category);
            });
        });
    </script>

    <!-- =========================================================
         ‚úÖ Component 75 Popup Logic
         ========================================================= -->
    <script>
        // ‚úÖ accept optional event (extra safety)
        function openLoginPopup(e){ if(e){ e.preventDefault(); e.stopPropagation(); } hbjOpen('login'); return false; }
        function openSignupPopup(e){ if(e){ e.preventDefault(); e.stopPropagation(); } hbjOpen('signup'); return false; }
        function openBmrPopup(e){ if(e){ e.preventDefault(); e.stopPropagation(); } hbjOpen('bmr'); return false; }

        function hbjOpen(screen){
            const modal = document.getElementById("hbjAuth");
            if(!modal) return;
            modal.classList.add("show");
            modal.setAttribute("aria-hidden","false");
            hbjShow(screen || 'login');
            hbjClearMsgs();
        }

        function hbjCloseAuth(){
            const modal = document.getElementById("hbjAuth");
            if(!modal) return;
            modal.classList.remove("show");
            modal.setAttribute("aria-hidden","true");
            hbjClearMsgs();
        }

        function hbjShow(screen){
            const login = document.getElementById("hbj-login");
            const signup = document.getElementById("hbj-signup");
            const bmr = document.getElementById("hbj-bmr");

            login.classList.add("hbj-hidden");
            signup.classList.add("hbj-hidden");
            bmr.classList.add("hbj-hidden");

            if(screen === "signup") signup.classList.remove("hbj-hidden");
            else if(screen === "bmr") bmr.classList.remove("hbj-hidden");
            else login.classList.remove("hbj-hidden");

            hbjClearMsgs();
        }

        function hbjClearMsgs(){
            const ids = ["hbjLoginErr","hbjLoginOk","hbjSignupErr","hbjSignupOk"];
            ids.forEach(id=>{
                const el = document.getElementById(id);
                if(el){ el.style.display="none"; el.textContent=""; }
            });
        }

        // ‚úÖ Close on outside click (capture = true makes it stable)
        document.addEventListener("click", (e)=>{
            const overlay = document.getElementById("hbjAuth");
            const card = document.querySelector(".hbj-auth-card");
            if(!overlay || !card) return;
            if(overlay.classList.contains("show") && e.target === overlay) hbjCloseAuth();
        }, true);

        // Close on ESC
        document.addEventListener("keydown", (e)=>{
            if(e.key === "Escape"){
                const overlay = document.getElementById("hbjAuth");
                if(overlay?.classList.contains("show")) hbjCloseAuth();
            }
        });

        function hbjForgot(){
            const ok = document.getElementById("hbjLoginOk");
            const err = document.getElementById("hbjLoginErr");
            if(err){ err.style.display="none"; err.textContent=""; }
            if(ok){
                ok.style.display="block";
                ok.textContent="Forgot password is not connected yet (UI only).";
            }
        }

        function hbjSocial(provider){
            const ok = document.getElementById("hbjLoginOk");
            const err = document.getElementById("hbjLoginErr");
            if(err){ err.style.display="none"; err.textContent=""; }
            if(ok){
                ok.style.display="block";
                ok.textContent = `‚ÄúLog in with ${provider}‚Äù is UI only for now.`;
            }
        }

        // ‚úÖ IMPORTANT FIX: if account not found => show message and DO NOT auto-switch to signup.
        document.getElementById("hbjLoginForm")?.addEventListener("submit", (e)=>{
            e.preventDefault();

            const email = document.getElementById("hbjLoginEmail").value.trim();
            const password = document.getElementById("hbjLoginPassword").value.trim();

            const err = document.getElementById("hbjLoginErr");
            const ok = document.getElementById("hbjLoginOk");
            if(ok){ ok.style.display="none"; ok.textContent=""; }

            if(typeof logIn !== "function"){
                if(err){
                    err.style.display="block";
                    err.textContent="logIn() is missing in common.js";
                }
                return;
            }

            const res = logIn({ email, password });

            if(!res?.ok){
                if(err){
                    err.style.display="block";
                    err.textContent = res?.message || "Login failed.";
                }
                return;
            }

            if(err){ err.style.display="none"; err.textContent=""; }
            hbjCloseAuth();
            if(typeof updateAuthUI === "function") updateAuthUI();
        });

        document.getElementById("hbjSignupForm")?.addEventListener("submit", (e)=>{
            e.preventDefault();

            const fullName = document.getElementById("hbjSignupName").value.trim();
            const email = document.getElementById("hbjSignupEmail").value.trim();
            const password = document.getElementById("hbjSignupPassword").value.trim();

            const err = document.getElementById("hbjSignupErr");
            const ok = document.getElementById("hbjSignupOk");
            if(ok){ ok.style.display="none"; ok.textContent=""; }

            if(typeof signUp !== "function"){
                if(err){
                    err.style.display="block";
                    err.textContent="signUp() is missing in common.js";
                }
                return;
            }

            const res = signUp({ fullName, email, password });

            if(!res?.ok){
                if(err){
                    err.style.display="block";
                    err.textContent = res?.message || "Signup failed.";
                }
                return;
            }

            if(err){ err.style.display="none"; err.textContent=""; }
            hbjCloseAuth();
            if(typeof updateAuthUI === "function") updateAuthUI();
        });

        // BMR (simple but correct)
        document.getElementById("hbjBmrForm")?.addEventListener("submit", (e)=>{
            e.preventDefault();

            const gender = document.getElementById("hbjGender").value;
            const height = parseFloat(document.getElementById("hbjHeight").value);
            const weight = parseFloat(document.getElementById("hbjWeight").value);
            const activity = parseFloat(document.getElementById("hbjActivity").value);

            const ageRange = document.getElementById("hbjAge").value;
            const age = (ageRange === "18-35") ? 26 : (ageRange === "35-60") ? 48 : 65;

            const s = (gender === "male") ? 5 : -161;
            const bmr = (10 * weight) + (6.25 * height) - (5 * age) + s;
            const maintenance = bmr * activity;

            const out = document.getElementById("hbjBmrResult");
            out.style.display = "block";
            out.innerHTML = `
                <div><strong>BMR:</strong> ${Math.round(bmr)} kcal/day</div>
                <div><strong>Maintenance:</strong> ${Math.round(maintenance)} kcal/day</div>
            `;
        });
    </script>

</body>
</html>